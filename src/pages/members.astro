---
import { getCollection } from 'astro:content';
import Layout from '../layouts/Layout.astro';

const projects = (await getCollection('projects')).sort(
  (a, b) => b.data.date.valueOf() - a.data.date.valueOf(),
);

const posts = (await getCollection('posts')).sort(
  (a, b) => b.data.date.valueOf() - a.data.date.valueOf(),
);
---

<Layout title="部員の活動 | OpenTUT">
  <div class="min-h-screen bg-gray-100 text-gray-800">
    <div class="container mx-auto px-5 py-10">
      <main>
        <section
          id="about"
          class="p-4 bg-white shadow-md mb-5 mx-2 border-2 border-t-tut-red"
        >
          <h2 class="text-2xl font-bold mb-3">部員の活動</h2>
          <p>部員がLT会で発表した技術について紹介しています。</p><br />
          <p>勉強会や、進行中のプロジェクトについての紹介もしています。</p><br
          /><br />
          <h3 class="text-xl font-bold mb-3">進行中のプロジェクト</h3>
          <div class="overflow-y-auto space-x-4">
            {
              projects.map((post) => (
                <article class="w-96 bg-white shadow-lg rounded-lg overflow-hidden border border-gray-300">
                  <div class="p-6">
                    <h2 class="text-2xl font-bold mb-2 text-gray-800">
                      {post.data.title}
                    </h2>
                    <p class="text-gray-700 mb-4">{post.data.description}</p>
                    <a
                      href={`/projects/${post.slug}`}
                      class="text-red-700 hover:text-red-800 font-semibold flex justify-end"
                    >
                      Read more...
                    </a>
                  </div>
                </article>
              ))
            }
          </div><br />
          <h3 class="text-xl font-bold mb-3">Archive</h3>
          <div class="flex overflow-x-auto space-x-2">
            {
              posts.map((post) => (
                <article>
                  <div class="flex flex-col max-w-sm w-96 h-full bg-white border border-gray-200 rounded-lg shadow">
                    <img
                      src={post.data.image?.url}
                      alt={post.data.image?.alt}
                      class="rounded-t-lg"
                    />
                    <div class="p-5 flex-grow">
                      <h2 class="text-2xl font-bold mb-2 text-gray-800">
                        {post.data.title}
                      </h2>
                    </div>
                    <a
                      href={`/posts/${post.slug}`}
                      class="text-red-700 hover:text-red-800 font-semibold mt-auto p-5 flex justify-end"
                    >
                      Read more...
                    </a>
                  </div>
                </article>
              ))
            }
          </div>
        </section><br /><br />
      </main>
    </div>
  </div>
</Layout>
